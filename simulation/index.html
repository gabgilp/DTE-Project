<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Solar Plant Visualization</title>
    <style>
      body { 
        margin: 0; 
        overflow: hidden; 
        background: #87ceeb; /* Sky blue fallback background */
        font-family: sans-serif; 
        width: 100vw;
        height: 100vh;
      }
      
      #controls {
        position: absolute; top: 15px; left: 15px;
        background: rgba(255, 255, 255, 0.95);
        padding: 20px; border-radius: 14px;
        box-shadow: 0 5px 18px rgba(0,0,0,0.15);
        min-width: 280px;
        font-size: 16px;
        display: block !important;
        visibility: visible !important;
        z-index: 200;
      }
      
      #controls h3 {
        margin: 0 0 18px 0;
        color: #333;
        font-size: 18px;
        line-height: 1.2;
        text-align: center;
      }
      
      #controls div {
        margin-bottom: 12px;
      }
      
      #controls label {
        display: inline-block;
        width: 70px;
        font-weight: bold;
        color: #555;
        font-size: 16px;
      }
      
      #controls select {
        width: 180px;
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 7px;
        font-size: 16px;
      }
      
      #controls input[type="date"], #controls input[type="time"], #hourInput, #minuteInput {
        padding: 8px;
        border: 1px solid #ccc;
        border-radius: 7px;
        font-size: 16px;
        margin-right: 8px;
      }
      
      #controls input[type="date"] {
        width: 130px;
      }
      
      #jumpToTimeBtn {
        padding: 8px 12px;
        background: #2196F3;
        color: white;
        border: none;
        border-radius: 7px;
        cursor: pointer;
        font-size: 14px;
        font-weight: bold;
      }
      
      #jumpToTimeBtn:hover {
        background: #1976D2;
      }
      
      #jumpToTimeBtn:disabled {
        background: #cccccc;
        cursor: not-allowed;
      }
      
      #playPauseBtn, #restartBtn, #stopBtn {
        padding: 10px 16px;
        background: #4CAF50;
        color: white;
        border: none;
        border-radius: 7px;
        cursor: pointer;
        font-size: 16px;
        font-weight: bold;
        margin-right: 8px;
        margin-bottom: 8px;
      }
      
      #playPauseBtn:hover {
        background: #45a049;
      }
      
      #playPauseBtn:disabled {
        background: #cccccc;
        cursor: not-allowed;
      }
      
      #restartBtn {
        background: #ff9800;
      }
      
      #restartBtn:hover {
        background: #e68900;
      }
      
      #restartBtn:disabled {
        background: #cccccc;
        cursor: not-allowed;
      }
      
      #stopBtn {
        background: #f44336;
      }
      
      #stopBtn:hover {
        background: #d32f2f;
      }
      
      #stopBtn:disabled {
        background: #cccccc;
        cursor: not-allowed;
      }
      
      /* Wrap buttons to prevent control panel from being too wide */
      .button-row {
        display: flex;
        flex-wrap: wrap;
        gap: 8px;
      }
      
      #statusMessage {
        margin-top: 15px;
        color: #e74c3c;
        font-size: 15px;
        font-weight: bold;
      }
      
      #statusMessage:empty {
        margin-top: 0;
      }
      
      /* Mode Selection Modal */
      #modeSelectionModal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.8);
        display: flex;
        justify-content: center;
        align-items: center;
        z-index: 1000;
        font-family: sans-serif;
        backdrop-filter: blur(2px);
      }
      
      #modeSelectionContent {
        background: white;
        padding: 40px;
        border-radius: 20px;
        text-align: center;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        max-width: 500px;
      }
      
      #modeSelectionContent h2 {
        margin-top: 0;
        color: #333;
        font-size: 28px;
        margin-bottom: 20px;
      }
      
      #modeSelectionContent p {
        font-size: 18px;
        color: #666;
        margin-bottom: 30px;
        line-height: 1.5;
      }
      
      .modeButton {
        display: inline-block;
        padding: 20px 40px;
        margin: 10px;
        background: #4CAF50;
        color: white;
        border: none;
        border-radius: 10px;
        font-size: 20px;
        font-weight: bold;
        cursor: pointer;
        transition: all 0.3s ease;
        min-width: 150px;
      }
      
      .modeButton:hover {
        background: #45a049;
        transform: translateY(-2px);
        box-shadow: 0 5px 15px rgba(0,0,0,0.2);
      }
      
      .modeButton.prediction {
        background: #2196F3;
      }
      
      .modeButton.prediction:hover {
        background: #1976D2;
      }
      
      /* Mode Switch Button */
      #modeSwitchBtn {
        position: absolute;
        top: 15px;
        left: 50%;
        transform: translateX(-50%);
        padding: 12px 24px;
        background: #9C27B0;
        color: white;
        border: none;
        border-radius: 25px;
        cursor: pointer;
        font-size: 16px;
        font-weight: bold;
        box-shadow: 0 3px 10px rgba(0,0,0,0.2);
        transition: all 0.3s ease;
        display: none;
        z-index: 300;
      }
      
      #modeSwitchBtn.visible {
        display: block !important;
        visibility: visible !important;
      }
      
      #modeSwitchBtn:hover {
        background: #7B1FA2;
        transform: translateX(-50%) translateY(-2px);
        box-shadow: 0 5px 15px rgba(0,0,0,0.3);
      }
      
      #hud {
        position: absolute; top: 15px; right: 15px;
        background: rgba(255, 255, 255, 0.95);
        padding: 25px; border-radius: 18px;
        font-family: sans-serif;
        font-size: 20px;
        box-shadow: 0 6px 23px rgba(0,0,0,0.15);
        min-width: 280px;
        z-index: 100;
        display: block !important;
      }
      
      #dualPanelData {
        min-width: 280px;
      }
      
      #hud b {
        font-size: 20px;
        color: #333;
      }
      
      #hud span {
        font-size: 22px;
        font-weight: bold;
        color: #2c3e50;
      }
    </style>
  </head>
  <body>
    <!-- Mode Selection Modal -->
    <div id="modeSelectionModal">
      <div id="modeSelectionContent">
        <h2>🌞 Solar Plant Visualization</h2>
        <p>Choose your visualization mode to get started:</p>
        <button class="modeButton" id="replayModeBtn" onclick="window.selectReplayMode()">
          📊 Replay Mode
          <br><small style="font-size: 14px; opacity: 0.8;">View historical data</small>
        </button>
        <button class="modeButton prediction" id="predictionModeBtn" onclick="window.selectPredictionMode()">
          🔮 Prediction Mode
          <br><small style="font-size: 14px; opacity: 0.8;">Generate forecasts</small>
        </button>
      </div>
    </div>

    <!-- Mode Switch Button (hidden initially) -->
    <button id="modeSwitchBtn">🔄 Switch Mode</button>

    <!-- Control Panel -->
    <div id="controls">
      <h3>Solar Inverter Simulation<br/>Select Mode</h3>
      <div>
        <label for="plantSelect">Plant:</label>
        <select id="plantSelect">
          <option value="">Select Plant</option>
          <option value="Plant1">Plant 1</option>
          <option value="Plant2">Plant 2</option>
        </select>
      </div>
      <div>
        <label for="inverterSelect">Inverter:</label>
        <select id="inverterSelect">
          <option value="">Select Inverter</option>
          <option value="1">Inverter 1</option>
          <option value="2">Inverter 2</option>
          <option value="3">Inverter 3</option>
          <option value="4">Inverter 4</option>
          <option value="5">Inverter 5</option>
          <option value="6">Inverter 6</option>
          <option value="7">Inverter 7</option>
          <option value="8">Inverter 8</option>
          <option value="9">Inverter 9</option>
          <option value="10">Inverter 10</option>
          <option value="11">Inverter 11</option>
          <option value="12">Inverter 12</option>
          <option value="13">Inverter 13</option>
          <option value="14">Inverter 14</option>
          <option value="15">Inverter 15</option>
          <option value="16">Inverter 16</option>
          <option value="17">Inverter 17</option>
          <option value="18">Inverter 18</option>
          <option value="19">Inverter 19</option>
          <option value="20">Inverter 20</option>
          <option value="21">Inverter 21</option>
          <option value="22">Inverter 22</option>
        </select>
      </div>
      <div>
        <label for="speedControl">Speed:</label>
        <select id="speedControl">
          <option value="1">1x (Normal)</option>
          <option value="2">2x (Fast)</option>
          <option value="5">5x (Faster)</option>
          <option value="10">10x (Very Fast)</option>
          <option value="20">20x (Maximum)</option>
        </select>
      </div>
      <div>
        <label for="dateInput">Date (UTC):</label>
        <input type="date" id="dateInput" min="2020-05-15" max="2020-06-17" value="2020-05-15">
      </div>
      <div>
        <label for="hourInput">Time (UTC):</label>
        <select id="hourInput" style="width: 60px; padding: 8px; border: 1px solid #ccc; border-radius: 7px; font-size: 16px; margin-right: 5px;">
          <option value="00">00</option>
          <option value="01">01</option>
          <option value="02">02</option>
          <option value="03">03</option>
          <option value="04">04</option>
          <option value="05">05</option>
          <option value="06">06</option>
          <option value="07">07</option>
          <option value="08">08</option>
          <option value="09">09</option>
          <option value="10">10</option>
          <option value="11">11</option>
          <option value="12">12</option>
          <option value="13">13</option>
          <option value="14">14</option>
          <option value="15">15</option>
          <option value="16">16</option>
          <option value="17">17</option>
          <option value="18">18</option>
          <option value="19">19</option>
          <option value="20">20</option>
          <option value="21">21</option>
          <option value="22">22</option>
          <option value="23">23</option>
        </select>
        <span style="margin: 0 3px;">:</span>
        <select id="minuteInput" style="width: 60px; padding: 8px; border: 1px solid #ccc; border-radius: 7px; font-size: 16px; margin-right: 8px;">
          <option value="00">00</option>
          <option value="15">15</option>
          <option value="30">30</option>
          <option value="45">45</option>
        </select>
        <button id="jumpToTimeBtn">Jump</button>
      </div>
      <div class="button-row">
        <button id="playPauseBtn">▶️ Play</button>
        <button id="restartBtn">🔄 Restart</button>
        <button id="stopBtn">⏹️ Stop</button>
      </div>
      
      <!-- Prediction Mode Navigation (hidden by default) -->
      <div id="predictionNavigation" style="display: none;">
        <div style="margin-bottom: 12px;">
          <div style="display: block; margin-bottom: 8px; font-weight: bold; color: #555;">Timestamp Navigation:</div>
          <div class="button-row">
            <button id="prevTimestampBtn" style="padding: 8px 12px; background: #FF9800; color: white; border: none; border-radius: 7px; cursor: pointer; font-size: 14px; font-weight: bold;">⬅️ Previous</button>
            <button id="nextTimestampBtn" style="padding: 8px 12px; background: #FF9800; color: white; border: none; border-radius: 7px; cursor: pointer; font-size: 14px; font-weight: bold;">Next ➡️</button>
          </div>
        </div>
      </div>
      <div id="statusMessage"></div>
    </div>

    <!-- Data HUD -->
    <div id="hud">
      <!-- Single Panel Data (Replay Mode) -->
      <div id="singlePanelData" style="display: block;">
        <b>Timestamp:</b> <span id="timestamp">-</span><br/>
        <b>AC Power:</b> <span id="power">-</span> kW<br/>
        <b>Module Temp:</b> <span id="module">-</span> °C<br/>
        <b>Ambient Temp:</b> <span id="ambient">-</span> °C<br/>
        <b>Irradiation:</b> <span id="irradiation">-</span>
      </div>
      
      <!-- Dual Panel Data (Prediction Mode) -->
      <div id="dualPanelData" style="display: none;">
        <div style="display: flex; flex-direction: column; gap: 15px;">
          <div>
            <div style="text-align: center; margin-bottom: 10px; padding: 5px; background: rgba(231, 76, 60, 0.1); border-radius: 5px;">
              <span id="predictionCounter" style="font-weight: bold; color: #e74c3c; font-size: 14px;">- / -</span>
            </div>
            <h4 style="margin: 0 0 8px 0; color: #2c3e50; border-bottom: 2px solid #e74c3c; padding-bottom: 3px; font-size: 16px;">Predicted Data</h4>
            <b>AC Power:</b> <span id="predictedPower">-</span> kW<br/>
            <b>Module Temp:</b> <span id="predictedModule">-</span> °C<br/>
            <b>Ambient Temp:</b> <span id="predictedAmbient">-</span> °C<br/>
            <b>Irradiation:</b> <span id="predictedIrradiation">-</span><br/>
            <b>Timestamp:</b> <span id="predictedTimestamp">-</span>
          </div>
          <div>
            <h4 style="margin: 0 0 8px 0; color: #2c3e50; border-bottom: 2px solid #3498db; padding-bottom: 3px; font-size: 16px;">Actual Data</h4>
            <b>AC Power:</b> <span id="actualPower">-</span> kW<br/>
            <b>Module Temp:</b> <span id="actualModule">-</span> °C<br/>
            <b>Ambient Temp:</b> <span id="actualAmbient">-</span> °C<br/>
            <b>Irradiation:</b> <span id="actualIrradiation">-</span><br/>
            <b>Timestamp:</b> <span id="actualTimestamp">-</span>
          </div>
        </div>
      </div>
    </div>


    <script type="module" src="./main.js"></script>
  </body>
</html>